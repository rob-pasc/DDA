<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Defense Agency - Detektiv Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="app.js" defer></script>
</head>
<body>
    <!-- Top Navigation / Gamification Bar -->
    <header>
        <div class="brand">
            <div class="brand-icon">üõ°Ô∏è</div>
            <div>Digital Defense <span style="color:var(--text-muted); font-weight:400;">Agency</span></div>
        </div>

        <div class="player-stats">
            <!-- Streak -->
            <div class="streak-fire">
                üî• 12 Tage Serie
            </div>

            <!-- Level & XP -->
            <div class="level-badge">
                Level 3: <span>Senior Analyst</span>
            </div>
            <div class="xp-container">
                <div class="xp-label">
                    <span>XP Fortschritt</span>
                    <span>850 / 1000</span>
                </div>
                <div class="xp-bar">
                    <div class="xp-fill"></div>
                </div>
            </div>
        </div>
    </header>

    <!-- 3-Column Dashboard Layout -->
    <div class="dashboard-grid">

        <!-- Left: Toolkit Sidebar -->
        <aside class="panel panel-sidebar">
            <div class="tool-category">Standard Werkzeuge</div>
            <button class="tool-btn active">
                <div class="icon-box">üîç</div>
                <span>Fall-Ermittlung</span>
            </button>
            <button class="tool-btn">
                <div class="icon-box">üìß</div>
                <span>Header-Analyse</span>
            </button>
            
            <div class="tool-category">Erweiterte Forensik</div>
            <button class="tool-btn">
                <div class="icon-box">üß†</div>
                <span>Logik-Check</span>
            </button>
            <button class="tool-btn">
                <div class="icon-box">üåç</div>
                <span>R√ºckw√§rtssuche</span>
            </button>
            <button class="tool-btn">
                <div class="icon-box">üî¨</div>
                <span>Pixel-DeepScan</span>
            </button>
            
            <div class="tool-category">Gesperrt (Lvl 5+)</div>
            <button class="tool-btn locked">
                <div class="icon-box">üîí</div>
                <span>Audio-Wellenform</span>
            </button>
        </aside>

        <!-- Center: The Active Case (Game View) -->
        <main class="panel">
            <div class="case-header">
                <div>
                    <div style="font-size:0.8rem; color:var(--text-muted); margin-bottom:4px;">AKTUELLES ASSIGNMENT</div>
                    <div class="case-id">Fall #4092: "Dringende Rechnung"</div>
                </div>
                <div class="case-tag">Potenzielles Phishing</div>
            </div>

            <!-- GAME LOOP A: Text Investigator -->
            <div class="tool-category">Beweismittel A: E-Mail Verlauf</div>
            <div class="investigation-card">
                <div class="card-header-bar">
                    <span>Outlook_Viewer_v2.exe</span>
                    <span>Bedrohungsstufe: Unbekannt</span>
                </div>
                <div class="email-mockup">
                    <div class="email-meta">
                        <div class="meta-row">
                            <span class="meta-label">Von:</span>
                            <!-- GAME ELEMENT: Suspicious Sender -->
                            <span class="suspicious-zone" data-id="spoofed-domain">
                                account-security@paypaI-support.net
                                <div class="analysis-tooltip">
                                    <span class="tooltip-tag">GEF√ÑLSCHTE DOMAIN</span>
                                    Falsch geschriebenes 'PayPal' (Gro√ües I statt kleinem l)
                                </div>
                            </span>
                        </div>
                        <div class="meta-row">
                            <span class="meta-label">Betreff:</span>
                            <span style="font-weight:bold;">HANDLUNGSBEDARF: Unautorisierter Zugriff erkannt</span>
                        </div>
                    </div>
                    
                    <div class="email-body">
                        <p style="margin-bottom:15px;">Sehr geehrter Kunde,</p>
                        
                        <p style="margin-bottom:15px;">Wir haben verd√§chtige Aktivit√§ten auf Ihrem Firmenkonto festgestellt. Um eine dauerhafte Sperrung zu verhindern, m√ºssen Sie 
                        <!-- GAME ELEMENT: Artificial Urgency -->
                        <span class="suspicious-zone" data-id="ai-syntax">
                            bitte das Notwendige veranlassen.
                            <div class="analysis-tooltip">
                                <span class="tooltip-tag">KI / SYNTAX</span>
                                Unnat√ºrliche Formulierung ("do the needful"), typisch f√ºr KI-√úbersetzungen oder Non-Native Speaker.
                            </div>
                        </span>Bitte machen Sie dies
                        <!-- Clue: Urgency -->
                        <span class="suspicious-zone" data-id="urgency">
                            innerhalb von 24 Stunden.
                            <div class="analysis-tooltip">
                                <span class="tooltip-tag">DRINGLICHKEIT</span>
                                Typisches Druckmittel: Kurze Frist soll Panik erzeugen.
                            </div>
                        </span></p>

                        <p style="margin-bottom:15px;">Bitte verifizieren Sie Ihre Identit√§t √ºber das sichere Portal unten:</p>

                        <!-- Clue: Malicious Link -->
                        <div class="suspicious-zone" data-id="malicious-link" style="background:#3b82f6; color:white; padding:10px 20px; display:inline-block; border-radius:4px; margin-bottom:20px; font-weight:bold;">
                            <a href="http://paypaI-verify.com">Jetzt Identit√§t Verifizieren</a>
                             <div class="analysis-tooltip">
                                <span class="tooltip-tag">SCH√ÑDLICHER LINK</span>
                                Linkziel maskiert. F√ºhrt zu 'papyal-verify.com'
                            </div>
                        </div>

                        <p style="color:#64748b; font-size:0.8rem;">
                            Security Team<br>
                            Global Operations<br>
                            <!-- Clue: Logic Error -->
                            <span class="suspicious-zone" data-id="logic-error">
                                Copyright 2022
                                <div class="analysis-tooltip">
                                    <span class="tooltip-tag">LOGIKFEHLER</span>
                                    Veraltetes Copyright-Datum (Aktuelles Jahr ist 2025)
                                </div>
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Right: Evidence & Verdict -->
        <aside class="panel panel-details">
            <h3 style="margin-bottom:20px;">Untersuchungsbericht</h3>

            <div class="stat-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <div class="stat-header" id="evidence-header" style="margin-bottom: 0;">Gesammelte Beweise (0/5)</div>
                    
                    <!-- Hints Toggle -->
                    <div class="hints-toggle-wrapper">
                        <span class="hints-label">Hinweise</span>
                        <label class="switch">
                            <input type="checkbox" id="hints-toggle">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>

                <!-- Hints Disabled by default -->
                <ul class="evidence-list hints-disabled" id="evidence-list">
                    <li class="evidence-item" data-target="spoofed-domain">
                        <span class="evidence-check">‚úì</span>
                        <span class="evidence-text">Gef√§lschte Domain</span>
                    </li>
                    <li class="evidence-item" data-target="ai-syntax">
                        <span class="evidence-check">‚úì</span>
                        <span class="evidence-text">Unnat√ºrliche Syntax</span>
                    </li>
                    <li class="evidence-item" data-target="malicious-link">
                         <span class="evidence-check">‚úì</span>
                        <span class="evidence-text">Sch√§dlicher Link</span>
                    </li>
                    <li class="evidence-item" data-target="logic-error">
                        <span class="evidence-check">‚úì</span>
                        <span class="evidence-text">Veraltetes Copyright</span>
                    </li>
                    <li class="evidence-item" data-target="urgency">
                        <span class="evidence-check">‚úì</span>
                        <span class="evidence-text">Dringlichkeit</span>
                    </li>
                </ul>
            </div>

            <div class="stat-card">
                <div class="stat-header">Kontext-Analyse</div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-top:10px;">
                    <span style="font-size:0.9rem;">KI-Wahrscheinlichkeit</span>
                    <span id="artificiality-text" style="font-weight:bold; color:var(--accent-success);">0%</span>
                </div>
                <div style="height:6px; background:#334155; border-radius:3px; margin-top:8px; overflow:hidden;">
                    <div id="artificiality-bar" style="width:0%; height:100%; background:var(--accent-success);"></div>
                </div>
            </div>

            <div class="verdict-section">
                <div class="stat-header">Endg√ºltiges Urteil</div>
                <p style="font-size:0.8rem; color:var(--text-muted); margin-bottom:10px;">
                    W√§hlen Sie die entsprechende Klassifizierung, um Fall #4092 abzuschlie√üen.
                </p>
                <div class="btn-group">
                    <button class="btn btn-safe" id="btn-safe">LEGITIM</button>
                    <button class="btn btn-scam" id="btn-scam">SCH√ÑDLICH</button>
                </div>
                <button class="btn" id="submit-btn" style="width:100%; margin-top:15px; background:var(--accent-primary); color:white; box-shadow:0 4px 10px rgba(59, 130, 246, 0.3);">
                    AN ZENTRALE SENDEN
                </button>
            </div>
            
            <div style="margin-top:40px; padding-top:20px; border-top:1px solid var(--panel-border);">
                <div class="stat-header">Abteilungs-Bestenliste</div>
                <div style="display:flex; justify-content:space-between; font-size:0.85rem; margin-top:10px;">
                    <span>1. Technik</span>
                    <span style="color:var(--accent-success);">98% Sicher</span>
                </div>
                <div style="display:flex; justify-content:space-between; font-size:0.85rem; margin-top:8px; opacity:0.7;">
                    <span>2. Vertrieb (Du)</span>
                    <span style="color:var(--accent-warning);">84% Sicher</span>
                </div>
                 <div style="display:flex; justify-content:space-between; font-size:0.85rem; margin-top:8px; opacity:0.5;">
                    <span>3. HR</span>
                    <span>79% Sicher</span>
                </div>
            </div>

        </aside>
    </div>

    <!-- RADIAL CONTEXT WHEEL MENU -->
    <div id="context-wheel" class="context-wheel">
        <!-- Shortened Labels -->
        <button class="wheel-btn" data-reason="spoofed-domain">Fake-Domain</button>
        <button class="wheel-btn" data-reason="formatting-error">Formatierung</button>
        <button class="wheel-btn" data-reason="ai-syntax">KI Syntax</button>
        <button class="wheel-btn" data-reason="urgency">Dringlichkeit</button>
        <button class="wheel-btn" data-reason="malicious-link">Schad-Link</button>
        <button class="wheel-btn" data-reason="generic-greeting">Allg. Anrede</button>
        <button class="wheel-btn" data-reason="logic-error">Logikfehler</button>
        <button class="wheel-btn" data-reason="data-request">Datenabfrage</button>
        <div class="wheel-center">‚úñ</div>
    </div>

    <!-- RESULT MODAL -->
    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <div class="modal-title" id="modal-title">Fall gel√∂st!</div>
            <div class="modal-body" id="modal-body">
                Hervorragende Arbeit, Agent. Sie haben den Phishing-Versuch korrekt identifiziert.
            </div>
            <button class="modal-btn" onclick="location.reload()">N√§chster Fall</button>
        </div>
    </div>
</body>
</html>